import { Component, OnInit } from '@angular/core';
import {FormBuilder, FormGroup, Validators} from "@angular/forms";
import {Observable} from "rxjs";
import {finalize} from "rxjs/operators";
import {AngularFireStorage} from "@angular/fire/compat/storage";
import {ManagerService} from "../../../services/manager.service";
import {Router} from "@angular/router";

@Component({
  selector: 'app-create-house',
  templateUrl: './create-house.component.html',
  styleUrls: ['./create-house.component.css']
})
export class CreateHouseComponent implements OnInit {

  formCreateHouse: FormGroup | undefined;
  imgUrl: string | undefined;
  downloadURL: Observable<string> | undefined;
  onFileSelected(event: any) {
    var n = Date.now();
    const file = event[0];
    const filePath = `RoomsImages/${n}`;
    const fileRef = this.storage.ref(filePath);
    const task = this.storage.upload(`RoomsImages/${n}`, file);
    task.snapshotChanges().pipe(
      finalize(() => {
        this.downloadURL = fileRef.getDownloadURL();
        this.downloadURL.subscribe(url => {
          if (url) {
            this.imgUrl = url;
          }
          console.log(this.imgUrl);
        });
      })
    )
      .subscribe(url => {
        if (url) {
          console.log(url);
        }
      });
  }
  constructor(private fb: FormBuilder,
              private storage: AngularFireStorage,
              private managerService: ManagerService,
              private router: Router) { }

  ngOnInit(): void {
    this.formCreateHouse = this.fb.group({
      name: ['', [Validators.required]],
      category_id: ['1'],
      address: ['', [Validators.required]],
      bedroom: ['1'],
      bathroom: ['1'],
      description: ['', [Validators.required]],
      price: ['', [Validators.required]],
      image: [''],
      user_id: [JSON.parse(<string>localStorage.getItem('userLogin')).id],
      status: ['con trong'],
    })
  }

  submit() {
    if (this.imgUrl == undefined) {
      // @ts-ignore
      this.formCreateHouse?.value.image = 'data:image/jpeg;base64,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'
    }
    else {
      // @ts-ignore
      this.formCreateHouse?.value.image = this.imgUrl;
    }
    let data = this.formCreateHouse?.value;
    console.log(data);
    this.managerService.createHouse(data).subscribe(res => {
      this.router.navigate(['manager/list-house']).then(r => {
        alert('Thêm thành công')
      })
    },
      error => {
      console.log(error);
      })
  }

  get name() {
    return this.formCreateHouse?.get('name');
  }

  get address() {
    return this.formCreateHouse?.get('address');
  }

  get description() {
    return this.formCreateHouse?.get('description');
  }

  get price() {
    return this.formCreateHouse?.get('price');
  }
}
